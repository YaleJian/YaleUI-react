{"version":3,"sources":["../../src/components/User/User.js"],"names":["User","props","pages","mini","headPortraitTags","headPortrait","state","btnClass","pageType","MINI","nickname","setting","bind","home","nicknameEnter","pin","pinEnter","inputInvalid","autoLoginEnter","autoLogin","setState","logout","e","target","value","localStorage","setItem","removeItem","text","currentTarget","setCustomValidity","HOME","getItem","userData","data","Boolean","page","React","Component","defaultProps"],"mappings":"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","file":"User.js","sourcesContent":["import React from \"react\";\nimport {Icon} from \"..\";\nimport \"./user.css\";\n\nclass User extends React.Component {\n    static MINI = 0;\n    static HOME = 1;\n\n    static defaultProps = {\n        logout : function () {\n\n        },\n    };\n\n    constructor(props) {\n        super(props);\n        let autoLogin = localStorage.getItem(\"autoLogin\") || false;\n        let userData = props.data;\n        this.state = {\n            headPortrait: userData.headPortrait || \"\",\n            nickname: userData.nickname || \"昵称\",\n            autoLogin: Boolean(autoLogin),\n            pageType: User.MINI\n        }\n    }\n\n    render() {\n        //页面切换\n        let page = \"\";\n        switch (this.state.pageType) {\n            case User.MINI :\n                page = this.pages.mini();\n                break;\n            case User.HOME :\n                page = this.pages.home();\n                break;\n            default:\n                break;\n        }\n\n        return <React.Fragment>\n            <div className=\"userArea\">\n                {page}\n            </div>\n        </React.Fragment>\n    }\n\n    pages = {\n        mini: () => {\n            let headPortraitTags = \"\", headPortrait = this.state.headPortrait;\n            if (!headPortrait) {\n                headPortraitTags = <Icon/>;\n            } else if (typeof headPortrait[0] === \"string\") {\n                headPortraitTags = <img src={headPortrait} alt={headPortrait}/>\n            }\n            let btnClass = \"userSettingBtn\";\n            btnClass = this.state.pageType === User.MINI ? btnClass : btnClass + \" show\";\n            return <div className=\"title\">\n                {this.state.pageType === User.MINI ? <span className=\"user \">\n                        <span className=\"headPortrait\">{headPortraitTags}</span>\n                        <span className=\"nickname\">{this.state.nickname}</span>\n                    </span> : \"\"}\n                <span className={btnClass} onClick={this.setting.bind(this)}><Icon name=\"i-shezhi1\"/></span>\n            </div>\n        },\n        home: () => {\n            return <React.Fragment>\n                {this.pages.mini()}\n                <form className=\"userSetting\">\n                    <div className=\"column\">\n                        <span className=\"left\">头像</span>\n                        <span className=\"right\">\n                            <span><Icon/></span>\n                            <span className=\"rightArrow\"><Icon name=\"i-BAI-youjiantou\"/></span>\n                        </span>\n                    </div>\n                    <div className=\"column\">\n                        <span className=\"left\">昵称</span>\n                        <span className=\"right\">\n                            <input value={this.state.nickname} onChange={this.pages.nicknameEnter.bind(this)} maxLength=\"8\"/>\n                            <span className=\"rightArrow\"><Icon name=\"i-BAI-youjiantou\"/></span>\n                        </span>\n                    </div>\n                    <div className=\"column\">\n                        <span className=\"left\">PIN</span>\n                        <span className=\"right\">\n                            <input value={this.state.pin} onChange={this.pages.pinEnter.bind(this)} maxLength=\"4\"\n                                   pattern=\"[0-9]*\"\n                                   onInvalid={this.pages.inputInvalid.bind(this, \"输入正确的PIN密码\")}\n                                   required/>\n                            <span className=\"rightArrow\"><Icon name=\"i-BAI-youjiantou\"/></span>\n                        </span>\n                    </div>\n                    <div className=\"column\">\n                        <span className=\"left\">下次自动登录</span>\n                        <span className=\"right\" onClick={this.pages.autoLoginEnter.bind(this)}>\n                            <input className=\"ya-radio\" type=\"radio\" checked={this.state.autoLogin} onChange={() => {\n                                return true\n                            }}/>\n                            <span className=\"radioText\"> </span>\n                        </span>\n                    </div>\n                    <div className=\"operate\">\n                        <button type=\"submit\">保存</button>\n                        <button onClick={() => this.setState({pageType: User.MINI})}>返回</button>\n                    </div>\n                    <div className=\"logout operate\">\n                        <button onClick={this.props.logout}>退出登录</button>\n                    </div>\n                </form>\n            </React.Fragment>\n        },\n        nicknameEnter: (e) => {\n            this.setState({nickname: e.target.value})\n        },\n        pinEnter: (e) => {\n            this.setState({pin: e.target.value})\n        },\n        autoLoginEnter: () => {\n            //设置以后登录标志\n            if (!this.state.autoLogin) {\n                localStorage.setItem(\"autoLogin\", \"true\");\n            } else {\n                //清除登录记录\n                localStorage.removeItem(\"autoLogin\");\n            }\n            this.setState({autoLogin: !this.state.autoLogin});\n        },\n        inputInvalid: (text, e) => {\n            e.currentTarget.setCustomValidity(text);\n        },\n\n    };\n\n    setting = () => {\n        this.setState({pageType: User.HOME});\n    };\n\n}\n\nexport {User};"]}